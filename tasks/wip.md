# WIP

## 直近の目的
YouTubeで快適モードを解除した後にコントロール要素が表示されない問題の原因特定と修正を最優先で行う。

## 優先度順タスク
1. 再現手順の明文化（30-60分）
   - 実機ブラウザでの再現手順をステップ化
   - 発生条件（拡張機能の設定, ブラウザ, OS, 拡張機能有効/無効, ページ幅など）を記録
2. 最小再現ケースの作成（1-3時間）
   - YouTubeシンプルページで最小限のDOM/スタイルを操作して問題を再現
   - 必要に応じて拡張の一部を切り離してテスト
3. コンテンツスクリプトのログ追加（1時間）
   - `disableComfortMode()` 実行時に変更した要素のリストと復元処理のログを出力
   - z-index / visibility / display / pointer-events 等の重要プロパティを記録
4. MutationObserverモニタ（30分）
   - 解除後にDOM変化でコントロールが非表示化されていないかを監視
5. ブラウザ検証（1-2時間）
   - DevToolsで要素のレンダーツリー、ペインティング、レイアウトを確認
   - GPUコンポジット、will-change、transform 等をチェック
6. 仮説検証（時間変動）
   - 親/祖先のスタッキングコンテキストによる遮蔽
   - pointer-events 等でクリックイベントが遮断されている
   - inline style の復元漏れ
7. 修正コードの作成とローカル検証（1-4時間）
8. ユニット/統合テストの追加（2-6時間）

## すぐに実行すること（今日）
- `tasks/todo.md` の「YouTubeコントロール表示問題」の既存発言を参照し、再現確認から開始
- `src/content.ts` の `disableComfortMode()` に詳細ログを追加してビルド・手動確認

## 備考
- Puppeteerで再現できないため、実機またはフルChromeでの確認が必要
- テスト基盤は並行で整備（Jest + jest-chrome）するが、まずはデバッグログで原因特定を優先

