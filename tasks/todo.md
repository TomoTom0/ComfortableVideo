# TODO

## テスト作成

### 優先度: 高
- [ ] テストフレームワークのセットアップ
  - Jest + TypeScript環境の構築
  - Chrome Extension用のモックライブラリ導入（jest-chrome等）

### content.ts のテスト
- [ ] 快適モード有効化/無効化のテスト
  - `enableComfortMode()` - 動画要素の検出と最大化
  - `disableComfortMode()` - スタイルの復元と状態クリア
  - 動画要素が存在しない場合のエラーハンドリング

- [ ] 動画最大化ロジックのテスト
  - `maximizeVideo()` - アスペクト比計算の検証
  - ウィンドウサイズ変更時のリサイズ処理

- [ ] マウスイベント制御のテスト
  - カーソル検出（2秒ホバー検出）
  - コントロール有効化/無効化のタイミング
  - 動画下部20%エリアのクリック検出

- [ ] サイト固有機能のテスト
  - YouTube用コントロールボタンの追加/削除
  - Prime Video用コントロールボタンの追加/削除
  - `isYouTube()`, `isPrimeVideo()` の判定ロジック

- [ ] MutationObserverのテスト
  - 動画要素の削除検出
  - 動画終了時の自動解除

### background.ts のテスト
- [ ] コンテキストメニュー作成のテスト
  - デフォルト設定でのメニュー作成
  - 設定に応じたメニューの表示/非表示

- [ ] メッセージングのテスト
  - コンテンツスクリプトへのメッセージ送信
  - エラーハンドリング

### options.ts のテスト
- [ ] 設定の読み込みと保存
  - `loadSettings()` - デフォルト値の適用
  - `saveSettings()` - chrome.storage.sync への保存
  - `resetSettings()` - デフォルトへのリセット

- [ ] UI制御のテスト
  - スライダーの値表示更新
  - トースト通知の表示

### E2Eテスト（将来的に）
- [ ] Puppeteerを使った実際のブラウザでのテスト
  - YouTube/Prime Videoでの動作確認
  - 快適モードの起動から終了までのフロー

### その他
- [ ] CI/CD環境の構築（GitHub Actions等）
- [ ] カバレッジ計測の導入
- [ ] テストドキュメントの作成
